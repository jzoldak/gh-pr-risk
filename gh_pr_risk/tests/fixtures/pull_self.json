{
  "url": "https://api.github.com/repos/edx/edx-platform/pulls/2836",
  "id": 13247553,
  "html_url": "https://github.com/edx/edx-platform/pull/2836",
  "diff_url": "https://github.com/edx/edx-platform/pull/2836.diff",
  "patch_url": "https://github.com/edx/edx-platform/pull/2836.patch",
  "issue_url": "https://api.github.com/repos/edx/edx-platform/issues/2836",
  "number": 2836,
  "state": "open",
  "title": "[DO NOT MERGE] First attempt to get Studio to render split_test modules",
  "user": {
    "login": "andy-armstrong",
    "id": 5985072,
    "avatar_url": "https://gravatar.com/avatar/a5118171dcd348c5fcebab8708b64dad?d=https%3A%2F%2Fidenticons.github.com%2F497b03c057a75e8e184ec081edc27350.png&r=x",
    "gravatar_id": "a5118171dcd348c5fcebab8708b64dad",
    "url": "https://api.github.com/users/andy-armstrong",
    "html_url": "https://github.com/andy-armstrong",
    "followers_url": "https://api.github.com/users/andy-armstrong/followers",
    "following_url": "https://api.github.com/users/andy-armstrong/following{/other_user}",
    "gists_url": "https://api.github.com/users/andy-armstrong/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andy-armstrong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andy-armstrong/subscriptions",
    "organizations_url": "https://api.github.com/users/andy-armstrong/orgs",
    "repos_url": "https://api.github.com/users/andy-armstrong/repos",
    "events_url": "https://api.github.com/users/andy-armstrong/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andy-armstrong/received_events",
    "type": "User",
    "site_admin": false
  },
  "body": "I've made a first attempt at getting Studio to render split_test modules. It gets much further now by judicious coding around the missing partitions, but it still doesn't work.  The next problem is that the modules don't have their xmodule_runtime initialized, which is the same problem seen by the Acid Block Bok Choy tests. I think that the way preview.py installs the xmodule_runtimes is flawed, but I'm out of time to understand why tonight.\r\n\r\nThe error is as follows:\r\n\r\n```\r\n2014-03-06 00:31:02,642 WARNING 2795 [contentstore.views.preview] preview.py:199 - Unable to render student_view for SplitTestDescriptorWithMixins(<xmodule.modulestore.mongo.base.CachingDescriptorSystem object at 0x7fabf6209b50>, <lms.lib.xblock.field_data.LmsFieldData object at 0x7fabf6209510>, ScopeIds(user_id=None, block_type=u'split_test', def_id=Location(u'i4x', u'AndyA', u'ST101', u'split_test', u'AB_Test', None), usage_id=Location(u'i4x', u'AndyA', u'ST101', u'split_test', u'AB_Test', None)))\r\nTraceback (most recent call last):\r\n  File \"/edx/app/edxapp/edx-platform/cms/djangoapps/contentstore/views/preview.py\", line 197, in get_preview_fragment\r\n    fragment = module.render(\"student_view\", context)\r\n  File \"/edx/app/edxapp/venvs/edxapp/src/xblock/xblock/core.py\", line 279, in render\r\n    return self.runtime.render(self, view, context)\r\n  File \"/edx/app/edxapp/edx-platform/common/lib/xmodule/xmodule/x_module.py\", line 1041, in render\r\n    return block.xmodule_runtime.render(to_render, view_name, context)\r\n  File \"/edx/app/edxapp/venvs/edxapp/src/xblock/xblock/runtime.py\", line 581, in render\r\n    frag = view_fn(context)\r\n  File \"/edx/app/edxapp/edx-platform/common/lib/xmodule/xmodule/split_test_module.py\", line 200, in student_view\r\n    return self.studio_preview(context)\r\n  File \"/edx/app/edxapp/edx-platform/common/lib/xmodule/xmodule/split_test_module.py\", line 179, in studio_preview\r\n    rendered_child = child.render('student_view', context)\r\n  File \"/edx/app/edxapp/venvs/edxapp/src/xblock/xblock/core.py\", line 279, in render\r\n    return self.runtime.render(self, view, context)\r\n  File \"/edx/app/edxapp/edx-platform/common/lib/xmodule/xmodule/x_module.py\", line 1036, in render\r\n    assert block.xmodule_runtime is not None\r\nAssertionError\r\n[06/Mar/2014 00:31:02] \"GET /xblock/AndyA.ST101.2014/branch/published/block/AB_Test/container_preview HTTP/1.1\" 200 460\r\n```\r\n\r\n@cpennington @dianakhuang @cahrens @flowerhack Let me know what you think of this, and especially if you can see a way around the problems I'm seeing. Don't worry if you want to wait until after the hackathon.",
  "created_at": "2014-03-06T05:40:24Z",
  "updated_at": "2014-03-06T14:46:25Z",
  "closed_at": null,
  "merged_at": null,
  "merge_commit_sha": "b215ee7911cdb4a0de2a645094781ef1582dfab6",
  "assignee": null,
  "milestone": null,
  "commits_url": "https://api.github.com/repos/edx/edx-platform/pulls/2836/commits",
  "review_comments_url": "https://api.github.com/repos/edx/edx-platform/pulls/2836/comments",
  "review_comment_url": "https://api.github.com/repos/edx/edx-platform/pulls/comments/{number}",
  "comments_url": "https://api.github.com/repos/edx/edx-platform/issues/2836/comments",
  "statuses_url": "https://api.github.com/repos/edx/edx-platform/statuses/de1f887816ef200e35432dc4cda774ffcefa370e",
  "head": {
    "label": "edx:andya/split-test-in-studio",
    "ref": "andya/split-test-in-studio",
    "sha": "de1f887816ef200e35432dc4cda774ffcefa370e",
    "user": {
      "login": "edx",
      "id": 3179841,
      "avatar_url": "https://gravatar.com/avatar/e1f6c6dc8772c47c0261cd5df2ed2814?d=https%3A%2F%2Fidenticons.github.com%2Feb37297d05deed12fdc058caae578112.png&r=x",
      "gravatar_id": "e1f6c6dc8772c47c0261cd5df2ed2814",
      "url": "https://api.github.com/users/edx",
      "html_url": "https://github.com/edx",
      "followers_url": "https://api.github.com/users/edx/followers",
      "following_url": "https://api.github.com/users/edx/following{/other_user}",
      "gists_url": "https://api.github.com/users/edx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edx/subscriptions",
      "organizations_url": "https://api.github.com/users/edx/orgs",
      "repos_url": "https://api.github.com/users/edx/repos",
      "events_url": "https://api.github.com/users/edx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edx/received_events",
      "type": "Organization",
      "site_admin": false
    },
    "repo": {
      "id": 10391073,
      "name": "edx-platform",
      "full_name": "edx/edx-platform",
      "owner": {
        "login": "edx",
        "id": 3179841,
        "avatar_url": "https://gravatar.com/avatar/e1f6c6dc8772c47c0261cd5df2ed2814?d=https%3A%2F%2Fidenticons.github.com%2Feb37297d05deed12fdc058caae578112.png&r=x",
        "gravatar_id": "e1f6c6dc8772c47c0261cd5df2ed2814",
        "url": "https://api.github.com/users/edx",
        "html_url": "https://github.com/edx",
        "followers_url": "https://api.github.com/users/edx/followers",
        "following_url": "https://api.github.com/users/edx/following{/other_user}",
        "gists_url": "https://api.github.com/users/edx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/edx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/edx/subscriptions",
        "organizations_url": "https://api.github.com/users/edx/orgs",
        "repos_url": "https://api.github.com/users/edx/repos",
        "events_url": "https://api.github.com/users/edx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/edx/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "private": false,
      "html_url": "https://github.com/edx/edx-platform",
      "description": "the edX learning management system (LMS) and course authoring tool, Studio",
      "fork": false,
      "url": "https://api.github.com/repos/edx/edx-platform",
      "forks_url": "https://api.github.com/repos/edx/edx-platform/forks",
      "keys_url": "https://api.github.com/repos/edx/edx-platform/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/edx/edx-platform/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/edx/edx-platform/teams",
      "hooks_url": "https://api.github.com/repos/edx/edx-platform/hooks",
      "issue_events_url": "https://api.github.com/repos/edx/edx-platform/issues/events{/number}",
      "events_url": "https://api.github.com/repos/edx/edx-platform/events",
      "assignees_url": "https://api.github.com/repos/edx/edx-platform/assignees{/user}",
      "branches_url": "https://api.github.com/repos/edx/edx-platform/branches{/branch}",
      "tags_url": "https://api.github.com/repos/edx/edx-platform/tags",
      "blobs_url": "https://api.github.com/repos/edx/edx-platform/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/edx/edx-platform/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/edx/edx-platform/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/edx/edx-platform/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/edx/edx-platform/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/edx/edx-platform/languages",
      "stargazers_url": "https://api.github.com/repos/edx/edx-platform/stargazers",
      "contributors_url": "https://api.github.com/repos/edx/edx-platform/contributors",
      "subscribers_url": "https://api.github.com/repos/edx/edx-platform/subscribers",
      "subscription_url": "https://api.github.com/repos/edx/edx-platform/subscription",
      "commits_url": "https://api.github.com/repos/edx/edx-platform/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/edx/edx-platform/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/edx/edx-platform/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/edx/edx-platform/issues/comments/{number}",
      "contents_url": "https://api.github.com/repos/edx/edx-platform/contents/{+path}",
      "compare_url": "https://api.github.com/repos/edx/edx-platform/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/edx/edx-platform/merges",
      "archive_url": "https://api.github.com/repos/edx/edx-platform/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/edx/edx-platform/downloads",
      "issues_url": "https://api.github.com/repos/edx/edx-platform/issues{/number}",
      "pulls_url": "https://api.github.com/repos/edx/edx-platform/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/edx/edx-platform/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/edx/edx-platform/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/edx/edx-platform/labels{/name}",
      "releases_url": "https://api.github.com/repos/edx/edx-platform/releases{/id}",
      "created_at": "2013-05-30T20:20:38Z",
      "updated_at": "2014-03-07T01:36:42Z",
      "pushed_at": "2014-03-07T01:36:12Z",
      "git_url": "git://github.com/edx/edx-platform.git",
      "ssh_url": "git@github.com:edx/edx-platform.git",
      "clone_url": "https://github.com/edx/edx-platform.git",
      "svn_url": "https://github.com/edx/edx-platform",
      "homepage": "http://code.edx.org/",
      "size": 971221,
      "stargazers_count": 1030,
      "watchers_count": 1030,
      "language": "Python",
      "has_issues": true,
      "has_downloads": true,
      "has_wiki": true,
      "forks_count": 496,
      "mirror_url": null,
      "open_issues_count": 150,
      "forks": 496,
      "open_issues": 150,
      "watchers": 1030,
      "default_branch": "master",
      "master_branch": "master"
    }
  },
  "base": {
    "label": "edx:master",
    "ref": "master",
    "sha": "b44780812c7e054d7fa8e1bde45f690e7ae79a66",
    "user": {
      "login": "edx",
      "id": 3179841,
      "avatar_url": "https://gravatar.com/avatar/e1f6c6dc8772c47c0261cd5df2ed2814?d=https%3A%2F%2Fidenticons.github.com%2Feb37297d05deed12fdc058caae578112.png&r=x",
      "gravatar_id": "e1f6c6dc8772c47c0261cd5df2ed2814",
      "url": "https://api.github.com/users/edx",
      "html_url": "https://github.com/edx",
      "followers_url": "https://api.github.com/users/edx/followers",
      "following_url": "https://api.github.com/users/edx/following{/other_user}",
      "gists_url": "https://api.github.com/users/edx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edx/subscriptions",
      "organizations_url": "https://api.github.com/users/edx/orgs",
      "repos_url": "https://api.github.com/users/edx/repos",
      "events_url": "https://api.github.com/users/edx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edx/received_events",
      "type": "Organization",
      "site_admin": false
    },
    "repo": {
      "id": 10391073,
      "name": "edx-platform",
      "full_name": "edx/edx-platform",
      "owner": {
        "login": "edx",
        "id": 3179841,
        "avatar_url": "https://gravatar.com/avatar/e1f6c6dc8772c47c0261cd5df2ed2814?d=https%3A%2F%2Fidenticons.github.com%2Feb37297d05deed12fdc058caae578112.png&r=x",
        "gravatar_id": "e1f6c6dc8772c47c0261cd5df2ed2814",
        "url": "https://api.github.com/users/edx",
        "html_url": "https://github.com/edx",
        "followers_url": "https://api.github.com/users/edx/followers",
        "following_url": "https://api.github.com/users/edx/following{/other_user}",
        "gists_url": "https://api.github.com/users/edx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/edx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/edx/subscriptions",
        "organizations_url": "https://api.github.com/users/edx/orgs",
        "repos_url": "https://api.github.com/users/edx/repos",
        "events_url": "https://api.github.com/users/edx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/edx/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "private": false,
      "html_url": "https://github.com/edx/edx-platform",
      "description": "the edX learning management system (LMS) and course authoring tool, Studio",
      "fork": false,
      "url": "https://api.github.com/repos/edx/edx-platform",
      "forks_url": "https://api.github.com/repos/edx/edx-platform/forks",
      "keys_url": "https://api.github.com/repos/edx/edx-platform/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/edx/edx-platform/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/edx/edx-platform/teams",
      "hooks_url": "https://api.github.com/repos/edx/edx-platform/hooks",
      "issue_events_url": "https://api.github.com/repos/edx/edx-platform/issues/events{/number}",
      "events_url": "https://api.github.com/repos/edx/edx-platform/events",
      "assignees_url": "https://api.github.com/repos/edx/edx-platform/assignees{/user}",
      "branches_url": "https://api.github.com/repos/edx/edx-platform/branches{/branch}",
      "tags_url": "https://api.github.com/repos/edx/edx-platform/tags",
      "blobs_url": "https://api.github.com/repos/edx/edx-platform/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/edx/edx-platform/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/edx/edx-platform/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/edx/edx-platform/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/edx/edx-platform/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/edx/edx-platform/languages",
      "stargazers_url": "https://api.github.com/repos/edx/edx-platform/stargazers",
      "contributors_url": "https://api.github.com/repos/edx/edx-platform/contributors",
      "subscribers_url": "https://api.github.com/repos/edx/edx-platform/subscribers",
      "subscription_url": "https://api.github.com/repos/edx/edx-platform/subscription",
      "commits_url": "https://api.github.com/repos/edx/edx-platform/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/edx/edx-platform/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/edx/edx-platform/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/edx/edx-platform/issues/comments/{number}",
      "contents_url": "https://api.github.com/repos/edx/edx-platform/contents/{+path}",
      "compare_url": "https://api.github.com/repos/edx/edx-platform/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/edx/edx-platform/merges",
      "archive_url": "https://api.github.com/repos/edx/edx-platform/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/edx/edx-platform/downloads",
      "issues_url": "https://api.github.com/repos/edx/edx-platform/issues{/number}",
      "pulls_url": "https://api.github.com/repos/edx/edx-platform/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/edx/edx-platform/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/edx/edx-platform/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/edx/edx-platform/labels{/name}",
      "releases_url": "https://api.github.com/repos/edx/edx-platform/releases{/id}",
      "created_at": "2013-05-30T20:20:38Z",
      "updated_at": "2014-03-07T01:36:42Z",
      "pushed_at": "2014-03-07T01:36:12Z",
      "git_url": "git://github.com/edx/edx-platform.git",
      "ssh_url": "git@github.com:edx/edx-platform.git",
      "clone_url": "https://github.com/edx/edx-platform.git",
      "svn_url": "https://github.com/edx/edx-platform",
      "homepage": "http://code.edx.org/",
      "size": 971221,
      "stargazers_count": 1030,
      "watchers_count": 1030,
      "language": "Python",
      "has_issues": true,
      "has_downloads": true,
      "has_wiki": true,
      "forks_count": 496,
      "mirror_url": null,
      "open_issues_count": 150,
      "forks": 496,
      "open_issues": 150,
      "watchers": 1030,
      "default_branch": "master",
      "master_branch": "master"
    }
  },
  "_links": {
    "self": {
      "href": "https://api.github.com/repos/edx/edx-platform/pulls/2836"
    },
    "html": {
      "href": "https://github.com/edx/edx-platform/pull/2836"
    },
    "issue": {
      "href": "https://api.github.com/repos/edx/edx-platform/issues/2836"
    },
    "comments": {
      "href": "https://api.github.com/repos/edx/edx-platform/issues/2836/comments"
    },
    "review_comments": {
      "href": "https://api.github.com/repos/edx/edx-platform/pulls/2836/comments"
    },
    "review_comment": {
      "href": "https://api.github.com/repos/edx/edx-platform/pulls/comments/{number}"
    },
    "commits": {
      "href": "https://api.github.com/repos/edx/edx-platform/pulls/2836/commits"
    },
    "statuses": {
      "href": "https://api.github.com/repos/edx/edx-platform/statuses/de1f887816ef200e35432dc4cda774ffcefa370e"
    }
  },
  "merged": false,
  "mergeable": false,
  "mergeable_state": "dirty",
  "merged_by": null,
  "comments": 0,
  "review_comments": 1,
  "commits": 25,
  "additions": 1860,
  "deletions": 33,
  "changed_files": 41
}
